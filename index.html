<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Idle ARPG - Combat Telemetry Console</title>
        <style>
            :root {
                --bg-base: #05060d;
                --bg-panel: rgba(12, 12, 24, 0.85);
                --bg-panel-alt: rgba(18, 18, 34, 0.85);
                --border-panel: rgba(60, 60, 90, 0.6);
                --accent-primary: #8da0ff;
                --accent-secondary: #7c84ff;
                --text-muted: #5f6ba6;
                --text-soft: #cfd2ff;
                --shadow-strong: 0 18px 40px rgba(0, 0, 0, 0.45);
            }

            * {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                font-family: 'JetBrains Mono', 'Fira Code', 'Source Code Pro', monospace;
                background: radial-gradient(circle at top, #0a0a17 0%, #05060d 55%, #030308 100%);
                color: #f8f5f5;
                min-height: 100vh;
            }

            #app {
                display: grid;
                grid-template-rows: auto 1fr auto;
                min-height: 100vh;
            }

            #ui-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 20px;
                padding: 24px 36px;
                background: linear-gradient(90deg, rgba(24, 24, 54, 0.95), rgba(34, 34, 72, 0.9));
                border-bottom: 1px solid rgba(70, 70, 110, 0.6);
                box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45);
                position: sticky;
                top: 0;
                z-index: 50;
            }

            .header-title {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .header-title h1 {
                margin: 0;
                font-size: 20px;
                text-transform: uppercase;
                letter-spacing: 0.28em;
                color: #ffffff;
            }

            .header-title .subtitle {
                font-size: 12px;
                color: var(--accent-secondary);
                letter-spacing: 0.38em;
                text-transform: uppercase;
            }

            .header-controls {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                justify-content: flex-end;
                gap: 12px;
            }

            .control-group {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 6px 12px;
                background: rgba(16, 16, 40, 0.7);
                border: 1px solid rgba(68, 68, 120, 0.6);
                border-radius: 8px;
                box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.25);
            }

            .control-group label {
                font-size: 11px;
                text-transform: uppercase;
                letter-spacing: 0.22em;
                color: #9fa6ff;
            }

            .header-controls button,
            .header-controls select {
                background: rgba(30, 30, 70, 0.9);
                border: 1px solid rgba(92, 92, 160, 0.6);
                color: #f4f6ff;
                padding: 6px 12px;
                border-radius: 5px;
                font-size: 12px;
                font-family: inherit;
                text-transform: uppercase;
                letter-spacing: 0.16em;
                cursor: pointer;
                transition: border-color 0.2s ease, box-shadow 0.2s ease;
            }

            .header-controls button:hover,
            .header-controls select:hover {
                border-color: rgba(160, 160, 255, 0.8);
                box-shadow: 0 0 12px rgba(124, 132, 255, 0.35);
            }

            .header-controls button:disabled {
                opacity: 0.45;
                cursor: not-allowed;
                box-shadow: none;
            }

            #run-status {
                padding: 6px 12px;
                border-radius: 5px;
                background: rgba(124, 132, 255, 0.18);
                border: 1px solid rgba(124, 132, 255, 0.45);
                color: #d0d3ff;
                font-size: 12px;
                letter-spacing: 0.22em;
                text-transform: uppercase;
            }

            #ui-grid {
                display: grid;
                grid-template-columns: 320px 1fr 360px;
                gap: 28px;
                padding: 28px 36px 20px;
                background: linear-gradient(180deg, rgba(8, 8, 18, 0.92), rgba(3, 3, 10, 0.98));
            }

            #entity-stack,
            #timeline-area,
            #rules-column {
                background: var(--bg-panel);
                border: 1px solid var(--border-panel);
                border-radius: 16px;
                padding: 20px;
                box-shadow: var(--shadow-strong);
                backdrop-filter: blur(6px);
            }

            #entity-stack,
            #rules-column {
                display: flex;
                flex-direction: column;
                gap: 18px;
                max-height: calc(100vh - 220px);
                overflow-y: auto;
            }

            #entity-stack .panel-title,
            #rules-column .panel-title,
            #timeline-area .panel-title {
                margin: 0;
                font-size: 14px;
                letter-spacing: 0.26em;
                text-transform: uppercase;
                color: var(--accent-primary);
            }

            .panel-subtitle {
                font-size: 11px;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 0.28em;
                margin-top: -6px;
                margin-bottom: 12px;
            }

            .entity-card {
                background: var(--bg-panel-alt);
                border: 1px solid rgba(70, 70, 110, 0.55);
                border-radius: 12px;
                padding: 16px;
                display: flex;
                flex-direction: column;
                gap: 14px;
            }

            .entity-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 12px;
            }

            .entity-name {
                font-size: 16px;
                font-weight: 600;
                letter-spacing: 0.08em;
            }

            .entity-role {
                font-size: 11px;
                text-transform: uppercase;
                letter-spacing: 0.22em;
                color: var(--accent-secondary);
            }

            .entity-status-badge {
                font-size: 10px;
                padding: 4px 10px;
                border-radius: 999px;
                border: 1px solid rgba(124, 255, 132, 0.4);
                background: rgba(124, 255, 132, 0.12);
                color: #a6ffaf;
                letter-spacing: 0.18em;
                text-transform: uppercase;
            }

            .entity-status-badge.danger {
                border-color: rgba(255, 124, 124, 0.45);
                background: rgba(255, 124, 124, 0.15);
                color: #ff9b9b;
            }

            .entity-metrics {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 10px 16px;
                font-size: 12px;
                color: var(--text-soft);
            }

            .entity-metrics span.label {
                display: block;
                font-size: 10px;
                letter-spacing: 0.18em;
                text-transform: uppercase;
                color: #7179b3;
            }

            .entity-metrics span.value {
                display: block;
                font-weight: 600;
                color: #f4f6ff;
                letter-spacing: 0.06em;
            }

            .resist-grid {
                display: grid;
                grid-template-columns: repeat(3, minmax(0, 1fr));
                gap: 10px;
            }

            .resist-item {
                background: rgba(30, 30, 58, 0.8);
                border: 1px solid rgba(74, 74, 120, 0.55);
                border-radius: 10px;
                padding: 8px;
                text-align: center;
                color: #b4bbff;
            }

            .resist-icon {
                display: block;
                font-size: 16px;
                margin-bottom: 4px;
            }

            .resist-value {
                display: block;
                font-size: 13px;
                font-weight: 600;
                color: #f6f8ff;
            }

            .resist-label {
                display: block;
                font-size: 9px;
                letter-spacing: 0.22em;
                text-transform: uppercase;
                color: #6a72aa;
                margin-top: 2px;
            }

            .summon-status {
                background: rgba(24, 24, 46, 0.85);
                border: 1px solid rgba(80, 80, 130, 0.5);
                border-radius: 10px;
                padding: 10px 12px;
                display: flex;
                flex-direction: column;
                gap: 6px;
            }

            .summon-status .section-label {
                font-size: 10px;
                letter-spacing: 0.24em;
                text-transform: uppercase;
                color: var(--accent-secondary);
            }

            .summon-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 10px;
                font-size: 12px;
                color: #d7daff;
            }

            #timeline-area {
                display: flex;
                flex-direction: column;
                gap: 18px;
                max-height: calc(100vh - 220px);
                overflow-y: auto;
            }

            #timeline-area .panel-title {
                margin-bottom: -4px;
            }

            .timeline-section {
                background: rgba(16, 16, 36, 0.85);
                border: 1px solid rgba(64, 64, 110, 0.55);
                border-radius: 14px;
                padding: 18px;
                display: flex;
                flex-direction: column;
                gap: 14px;
            }

            .section-title {
                margin: 0;
                font-size: 12px;
                letter-spacing: 0.24em;
                text-transform: uppercase;
                color: var(--accent-primary);
            }

            .timeline-track {
                display: flex;
                align-items: center;
                gap: 14px;
            }

            .timeline-track.column {
                flex-direction: column;
                align-items: flex-start;
            }

            .timeline-label {
                font-size: 11px;
                letter-spacing: 0.22em;
                text-transform: uppercase;
                color: #6f79b4;
                width: 160px;
                flex-shrink: 0;
            }

            .timeline-bar {
                position: relative;
                flex: 1;
                height: 18px;
                border-radius: 999px;
                background: rgba(36, 36, 70, 0.75);
                border: 1px solid rgba(70, 70, 120, 0.6);
                overflow: hidden;
            }

            .timeline-bar.small {
                height: 14px;
            }

            .timeline-progress {
                position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                width: 0;
                background: linear-gradient(90deg, #7c84ff, #c69bff);
                box-shadow: 0 0 14px rgba(124, 132, 255, 0.35);
                transition: width 0.15s linear;
            }

            .timeline-track.aura .timeline-progress {
                background: linear-gradient(90deg, #51cf66, #8dffb0);
                box-shadow: 0 0 14px rgba(81, 207, 102, 0.35);
            }

            .timeline-text {
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                font-size: 11px;
                color: #f8faff;
                letter-spacing: 0.06em;
                pointer-events: none;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            }

            .timeline-empty {
                font-size: 10px;
                letter-spacing: 0.24em;
                text-transform: uppercase;
                color: #565f95;
                padding: 8px 0;
            }

            .timeline-summon-wrapper {
                display: flex;
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }

            .summon-bar {
                display: flex;
                flex-direction: column;
                gap: 6px;
                width: 100%;
            }

            .summon-bar .summon-name {
                font-size: 11px;
                letter-spacing: 0.24em;
                text-transform: uppercase;
                color: var(--accent-secondary);
            }

            #telemetry-panels.hidden,
            #combat-arena-section.hidden {
                display: none !important;
            }

            #combat-arena {
                position: relative;
                min-height: 240px;
                border-radius: 14px;
                border: 1px solid rgba(70, 70, 110, 0.6);
                background: radial-gradient(circle at center, rgba(28, 28, 52, 0.9) 0%, rgba(10, 10, 22, 0.95) 55%, rgba(3, 3, 9, 0.98) 100%);
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 42px;
                overflow: hidden;
            }

            .arena-trees {
                position: absolute;
                font-family: 'Courier New', monospace;
                color: rgba(45, 90, 45, 0.35);
                font-size: 14px;
                line-height: 0.9;
                white-space: pre;
                user-select: none;
                pointer-events: none;
                z-index: 1;
            }

            .character-slot {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 10px;
                position: relative;
                z-index: 10;
            }

            .sprite-container {
                width: 70px;
                height: 80px;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
            }

            .sprite {
                font-size: 30px;
                font-weight: bold;
                font-family: 'Courier New', monospace;
                user-select: none;
                transition: transform 0.1s ease-out;
                text-shadow: 0 0 14px rgba(74, 158, 255, 0.6);
            }

            #player-sprite {
                color: #4a9eff;
            }

            #enemy-sprite {
                color: #f5f5dc;
                text-shadow: 0 0 12px rgba(255, 68, 68, 0.6);
                font-size: 15px;
                line-height: 0.8;
                white-space: pre;
                text-align: center;
            }

            .bar-container {
                width: 160px;
                height: 18px;
                background: rgba(18, 18, 32, 0.9);
                border: 1px solid rgba(60, 60, 90, 0.65);
                border-radius: 999px;
                position: relative;
                overflow: hidden;
            }

            .health-bar {
                height: 100%;
                background: linear-gradient(90deg, #c62828, #ef5350);
                transition: width 0.3s ease;
                position: relative;
            }

            .mana-bar {
                height: 100%;
                background: linear-gradient(90deg, #1565c0, #42a5f5);
                transition: width 0.3s ease;
                position: relative;
            }

            .bar-text {
                position: absolute;
                width: 100%;
                text-align: center;
                font-size: 10px;
                line-height: 18px;
                color: white;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
                pointer-events: none;
            }

            .damage-splat {
                position: absolute;
                width: 50px;
                height: 45px;
                pointer-events: none;
                z-index: 100;
                animation: splat-appear 0.05s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

            .splat-bg {
                position: absolute;
                width: 100%;
                height: 100%;
            }

            .splat-text {
                position: absolute;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
                font-weight: bold;
                color: white;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.9), -1px -1px 2px rgba(0, 0, 0, 0.9);
                pointer-events: none;
            }

            @keyframes splat-appear {
                0% {
                    transform: scale(0);
                }
                100% {
                    transform: scale(1);
                }
            }

            .attacking {
                animation: attack-lunge 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            }

            @keyframes attack-lunge {
                0% {
                    transform: translateX(0) scale(1);
                }
                40% {
                    transform: translateX(18px) scale(1.28);
                }
                100% {
                    transform: translateX(0) scale(1);
                }
            }

            .enemy-attacking {
                animation: enemy-attack-lunge 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            }

            @keyframes enemy-attack-lunge {
                0% {
                    transform: translateX(0) scale(1);
                }
                40% {
                    transform: translateX(-18px) scale(1.28);
                }
                100% {
                    transform: translateX(0) scale(1);
                }
            }

            .damaged {
                animation: damage-flash 0.15s !important;
            }

            @keyframes damage-flash {
                0% {
                    transform: scale(1);
                    filter: brightness(1);
                }
                50% {
                    transform: scale(0.9);
                    filter: brightness(2) hue-rotate(180deg);
                }
                100% {
                    transform: scale(1);
                    filter: brightness(1);
                }
            }

            .ability-cooldowns {
                display: flex;
                gap: 12px;
                margin-top: 6px;
            }

            .ability-icon {
                width: 52px;
                height: 52px;
                position: relative;
                border: 2px solid #4a9eff;
                border-radius: 50%;
                background: #1a1a1a;
                transition: transform 0.1s, box-shadow 0.2s;
                user-select: none;
            }

            .ability-icon:hover {
                transform: scale(1.05);
                box-shadow: 0 0 10px rgba(74, 158, 255, 0.5);
            }

            .ability-icon:active {
                transform: scale(0.95);
            }

            .ability-icon.disabled {
                opacity: 0.5;
                cursor: not-allowed !important;
            }

            .ability-icon.disabled:hover {
                transform: scale(1);
                box-shadow: none;
            }

            .ability-icon:hover::after {
                content: attr(data-tooltip);
                position: absolute;
                bottom: 64px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(24, 24, 40, 0.92);
                border: 1px solid rgba(68, 68, 120, 0.6);
                padding: 8px;
                border-radius: 6px;
                white-space: pre-line;
                width: 260px;
                font-size: 12px;
                z-index: 100;
                pointer-events: none;
            }

            .ability-icon-content {
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 22px;
                font-weight: bold;
                color: #4a9eff;
                position: relative;
                z-index: 2;
            }

            .cooldown-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border-radius: 50%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 3;
            }

            .cooldown-sweep {
                position: absolute;
                top: -2px;
                left: -2px;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                z-index: 4;
            }

            .cooldown-text {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: white;
                font-size: 14px;
                font-weight: bold;
                text-shadow: 1px 1px 2px black;
                z-index: 5;
            }

            .ability-ready {
                animation: pulse-ready 1s ease-in-out infinite;
            }

            @keyframes pulse-ready {
                0%, 100% {
                    box-shadow: 0 0 6px #4a9eff;
                }
                50% {
                    box-shadow: 0 0 18px #4a9eff, 0 0 28px #4a9eff;
                }
            }

            .aura-active {
                animation: aura-pulse 2s ease-in-out infinite;
            }

            @keyframes aura-pulse {
                0%, 100% {
                    box-shadow: 0 0 12px #51cf66;
                }
                50% {
                    box-shadow: 0 0 24px #51cf66, 0 0 34px #51cf66;
                }
            }

            #rules-column {
                gap: 0;
            }

            #combat-ai-panel {
                background: rgba(18, 18, 34, 0.88);
                border: 1px solid rgba(70, 70, 110, 0.55);
                border-radius: 14px;
                padding: 18px;
                display: flex;
                flex-direction: column;
                gap: 14px;
                height: 100%;
            }

            #rules-metrics {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 12px;
            }

            .metric {
                background: rgba(28, 28, 52, 0.75);
                border: 1px solid rgba(74, 74, 120, 0.6);
                border-radius: 10px;
                padding: 12px;
                text-align: center;
            }

            .metric-label {
                display: block;
                font-size: 10px;
                letter-spacing: 0.26em;
                text-transform: uppercase;
                color: #6d74a9;
                margin-bottom: 6px;
            }

            .metric-value {
                font-size: 18px;
                font-weight: 600;
                color: #f4f6ff;
                letter-spacing: 0.08em;
            }

            .ai-rule {
                background: rgba(12, 12, 28, 0.9);
                border: 1px solid rgba(70, 70, 110, 0.55);
                border-radius: 10px;
                padding: 12px;
                display: grid;
                grid-template-columns: auto 1fr auto;
                gap: 12px;
                align-items: center;
            }

            .rule-priority {
                font-size: 12px;
                color: var(--accent-primary);
                font-weight: 600;
            }

            .rule-controls {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .rule-controls button {
                background: #232347;
                border: 1px solid #42427a;
                color: #cfd2ff;
                padding: 2px 6px;
                font-size: 12px;
                border-radius: 4px;
                cursor: pointer;
            }

            .rule-controls button:hover {
                border-color: #6c6cff;
            }

            .rule-content {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                align-items: center;
                font-size: 12px;
                color: #d6daff;
            }

            .rule-content select,
            .rule-content input {
                background: #1a1a34;
                border: 1px solid #3a3a66;
                color: #f0f3ff;
                padding: 4px 8px;
                border-radius: 4px;
                font-family: inherit;
                font-size: 12px;
            }

            .rule-toggle {
                display: flex;
                align-items: center;
                gap: 4px;
                font-size: 11px;
                color: var(--accent-secondary);
                text-transform: uppercase;
                letter-spacing: 0.16em;
            }

            .rule-delete {
                background: #3b161a;
                border: 1px solid #7c1f2b;
                color: #ff6b6b;
                padding: 4px 8px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 11px;
                text-transform: uppercase;
                letter-spacing: 0.14em;
            }

            .rule-delete:hover {
                border-color: #ff6b6b;
            }

            #add-rule-btn {
                align-self: flex-start;
                background: #2d3f7c;
                border: 1px solid #4b65d1;
                color: #f4f6ff;
                padding: 6px 14px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.2em;
            }

            #add-rule-btn:hover {
                border-color: #7a92ff;
            }

            #event-feed {
                background: rgba(12, 12, 26, 0.95);
                border-top: 1px solid rgba(70, 70, 110, 0.6);
                padding: 20px 36px 28px;
                box-shadow: 0 -16px 36px rgba(0, 0, 0, 0.45);
            }

            #event-feed .panel-header {
                display: flex;
                justify-content: space-between;
                align-items: baseline;
            }

            #event-feed .panel-header h2 {
                margin: 0;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 0.28em;
                color: var(--accent-primary);
            }

            #combat-log {
                margin-top: 14px;
                max-height: 220px;
                overflow-y: auto;
                background: rgba(10, 10, 24, 0.86);
                border: 1px solid rgba(60, 60, 90, 0.6);
                border-radius: 12px;
                padding: 14px;
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            #combat-log div {
                padding: 8px 10px;
                border-radius: 8px;
                background: rgba(20, 20, 40, 0.8);
                font-size: 12px;
                letter-spacing: 0.04em;
                border-left: 3px solid transparent;
            }

            #combat-log .damage {
                border-color: #ff6b6b;
                color: #ff9a9a;
                background: rgba(60, 0, 0, 0.35);
            }

            #combat-log .heal {
                border-color: #51cf66;
                color: #8cff9a;
                background: rgba(0, 60, 20, 0.35);
            }

            #combat-log .mana {
                border-color: #339af0;
                color: #7bb7ff;
                background: rgba(0, 30, 60, 0.35);
            }

            #combat-log .player-magic {
                border-color: #4dabf7;
                color: #9bc6ff;
                background: rgba(15, 30, 70, 0.45);
                font-weight: 600;
            }

            #combat-log .system {
                border-color: #868e96;
                color: #b7bdc5;
                background: rgba(40, 40, 50, 0.4);
            }

            #combat-log .melee {
                border-color: #ffa726;
                color: #ffcd82;
                background: rgba(60, 35, 0, 0.35);
                font-style: italic;
            }

            #combat-log .loot {
                border-color: #ffd93d;
                color: #ffe17a;
                background: rgba(70, 50, 0, 0.35);
                font-weight: bold;
            }

            #combat-log .windfury {
                box-shadow: inset 0 0 14px rgba(81, 207, 102, 0.25);
                border-left-color: #51cf66;
            }

            .hidden {
                display: none !important;
            }

            body[data-view="timeline"] #run-status {
                background: rgba(124, 132, 255, 0.35);
                border-color: rgba(124, 132, 255, 0.6);
                color: #f0f2ff;
            }

            body[data-view="arena"] #run-status {
                background: rgba(255, 124, 124, 0.22);
                border-color: rgba(255, 124, 124, 0.5);
                color: #ffb3b3;
            }
        </style>
    </head>
    <body>
        <div id="app">
            <header id="ui-header">
                <div class="header-title">
                    <h1>Stat-Sim Console</h1>
                    <div class="subtitle">Telemetry-First • Idle ARPG Instrumentation</div>
                </div>
                <div class="header-controls">
                    <div class="control-group">
                        <button id="pause-btn">Pause</button>
                        <button id="resume-btn">Resume</button>
                        <button id="step-btn">Step</button>
                    </div>
                    <div class="control-group">
                        <label for="speed-select">Speed</label>
                        <select id="speed-select">
                            <option value="0.5">0.5x</option>
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="4">4x</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="view-select">View</label>
                        <select id="view-select">
                            <option value="mixed" selected>Mixed</option>
                            <option value="timeline">Timeline</option>
                            <option value="arena">Arena</option>
                        </select>
                    </div>
                    <div id="run-status">Running ×1</div>
                </div>
            </header>
            <div id="ui-grid">
                <aside id="entity-stack">
                    <h2 class="panel-title">Entity Stack</h2>
                    <div class="panel-subtitle">Actors • HP/MP bars • Resist Icons • Sparkline</div>
                    <div class="entity-card">
                        <div class="entity-card-header">
                            <div>
                                <div class="entity-role">Player</div>
                                <div class="entity-name">Cleric</div>
                            </div>
                            <span class="entity-status-badge" id="player-status-badge">Ready</span>
                        </div>
                        <div id="player-stats"></div>
                    </div>
                    <div class="entity-card">
                        <div class="entity-card-header">
                            <div>
                                <div class="entity-role">Target</div>
                                <div class="entity-name" id="enemy-name">Skeleton</div>
                            </div>
                            <span class="entity-status-badge" id="enemy-status-badge">Live</span>
                        </div>
                        <div id="enemy-stats"></div>
                    </div>
                </aside>
                <main id="timeline-area">
                    <h2 class="panel-title">Timelines</h2>
                    <div class="panel-subtitle">Casts • Cooldowns • Buff/Debuff Bands • Proc Pulses</div>
                    <section class="timeline-section" id="combat-arena-section">
                        <h3 class="section-title">Combat Space</h3>
                        <div id="combat-arena">
                            <div class="arena-trees" style="left: 12px; top: 22%;">    /\
   /--\
  /----\</div>
                            <div class="arena-trees" style="left: 80px; top: 60%;">   /\
  /--\
 /----\</div>
                            <div class="arena-trees" style="right: 12px; top: 24%;">    /\
   /--\
  /----\</div>
                            <div class="arena-trees" style="right: 90px; top: 56%;">   /\
  /--\
 /----\</div>
                            <div class="arena-trees" style="top: 10px; left: 22%;">  /\
 /--\
/----\</div>
                            <div class="arena-trees" style="top: 16px; right: 32%;">  /\
 /--\
/----\</div>
                            <div class="arena-trees" style="bottom: 24px; left: 26%;">  /\
 /--\
/----\</div>
                            <div class="arena-trees" style="bottom: 26px; right: 22%;">  /\
 /--\
/----\</div>
                            <div class="character-slot">
                                <div class="sprite-container">
                                    <div id="player-sprite" class="sprite">✦</div>
                                </div>
                                <div class="bar-container">
                                    <div id="player-health-bar" class="health-bar" style="width: 100%">
                                        <div class="bar-text">100/100</div>
                                    </div>
                                </div>
                                <div class="bar-container">
                                    <div id="player-mana-bar" class="mana-bar" style="width: 100%">
                                        <div class="bar-text">100/100</div>
                                    </div>
                                </div>
                            </div>
                            <div id="summon-container" style="position: absolute; left: 0; bottom: 0; width: 100%; height: 100%; pointer-events: none; z-index: 8;"></div>
                            <div class="character-slot">
                                <div class="sprite-container">
                                    <div id="enemy-sprite" class="sprite">0
/|\
/\</div>
                                </div>
                                <div class="bar-container">
                                    <div id="enemy-health-bar" class="health-bar" style="width: 100%">
                                        <div class="bar-text">100/100</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <div id="telemetry-panels">
                        <section class="timeline-section">
                            <h3 class="section-title">Ability & Cooldown Tracks</h3>
                            <div class="timeline-track">
                                <div class="timeline-label">Melee Swing</div>
                                <div class="timeline-bar">
                                    <div class="timeline-progress" id="timeline-melee"></div>
                                    <span class="timeline-text" id="timeline-melee-text">Ready</span>
                                </div>
                            </div>
                            <div class="timeline-track">
                                <div class="timeline-label">Holy Strike</div>
                                <div class="timeline-bar">
                                    <div class="timeline-progress" id="timeline-holy-strike"></div>
                                    <span class="timeline-text" id="timeline-holy-strike-text">Ready</span>
                                </div>
                            </div>
                            <div class="timeline-track">
                                <div class="timeline-label">Global Cooldown</div>
                                <div class="timeline-bar">
                                    <div class="timeline-progress" id="timeline-gcd"></div>
                                    <span class="timeline-text" id="timeline-gcd-text">Open</span>
                                </div>
                            </div>
                        </section>
                        <section class="timeline-section">
                            <h3 class="section-title">Buffs & Summons</h3>
                            <div class="timeline-track aura">
                                <div class="timeline-label">Windfury Aura</div>
                                <div class="timeline-bar">
                                    <div class="timeline-progress" id="timeline-windfury"></div>
                                    <span class="timeline-text" id="timeline-windfury-text">Inactive</span>
                                </div>
                            </div>
                            <div class="timeline-track column">
                                <div class="timeline-label">Summons</div>
                                <div class="timeline-summon-wrapper" id="summon-timeline-list">
                                    <div class="timeline-empty">No active summons</div>
                                </div>
                            </div>
                        </section>
                    </div>
                </main>
                <aside id="rules-column">
                    <div id="combat-ai-panel">
                        <h3 class="panel-title">Rules Editor</h3>
                        <div class="panel-subtitle">IF / THEN List • Trigger % • Avg Value • Waste / Overlap</div>
                        <div id="rules-metrics">
                            <div class="metric">
                                <span class="metric-label">Active Rules</span>
                                <span class="metric-value" id="rule-count">0</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Automation Health</span>
                                <span class="metric-value" id="rule-efficiency">Collecting</span>
                            </div>
                        </div>
                        <div id="rules-list"></div>
                        <button id="add-rule-btn">+ Add Rule</button>
                    </div>
                </aside>
            </div>
            <footer id="event-feed">
                <div class="panel-header">
                    <h2>Collapsed Event Feed</h2>
                    <div class="panel-subtitle">Chains grouped • Smite → Expose → Execute ×4</div>
                </div>
                <div id="combat-log"></div>
            </footer>
        </div>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>
